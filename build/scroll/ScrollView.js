/*! 2019-12-28 */

KISSY.add(function(t,o,s,l,r){var n=['<div class="scroll-content">','    <div class="scroll"></div>','    <div class="scroll-bar scroll-bar-v">','\t\t<div class="scroll-bar-indicator scroll-bar-fade-out" style=""></div>',"\t</div>","</div>"].join(""),i=document;function e(t){this.scrollTop=0,e.superclass.constructor.call(this,t)}return t.extend(e,r),UFO.augment(e,{alias:"scrollview",initComponent:function(){this.el=t.all(n),this.scrollContent=this.el,this.scroll=this.el.one(".scroll"),this.scrollBar=this.el.one(".scroll-bar"),this.scrollIndicator=this.el.one(".scroll-bar-indicator"),this.scrollIndicatorMinSize=50,e.superclass.initComponent.apply(this,arguments)},setScrollIndicatorSizeAndPos:function(){this.scrollIndicatorSize=this.clacScrollIndicatorSize(),this.setScrollIndicatorSize(),this.setScrollIndicatorPosition()},clacScrollIndicatorSize:function(){return parseInt(this.scrollContent.height()/this.scrollContent.getDOMNode().scrollHeight*this.scrollBar.height())},updateLayout:function(){e.superclass.updateLayout.apply(this,arguments),this.setScrollIndicatorSizeAndPos()},setScrollIndicatorSize:function(){this.scrollIndicatorSize>this.scrollIndicatorMinSize?this.scrollIndicatorSize<this.scrollBar.height()?this.scrollIndicator.css({height:this.scrollIndicatorSize+"px",display:"inline-block"}):this.scrollIndicator.hide():(this.scrollIndicatorSize=this.scrollIndicatorMinSize,this.scrollIndicator.css({height:this.scrollIndicatorSize+"px",display:"inline-block"}))},setScrollIndicatorPosition:function(){if("none"!=this.scrollIndicator.css("display")){var t=this.scrollTop/(this.scrollContent.getDOMNode().scrollHeight-this.scrollContent.height())*(this.scrollBar.height()-this.scrollIndicatorSize);this.scrollIndicator.css({"-webkit-transform":"translate3d(0px, "+t+"px, 0px)","-ms-transform":"translate3d(0px, "+t+"px, 0px)","-moz-transform":"translate3d(0px, "+t+"px, 0px)","-o-transform":"translate3d(0px, "+t+"px, 0px)",transform:"translate3d(0px, "+t+"px, 0px)"})}},getBodyContainer:function(){return this.scroll},onScrollContentMouseMove:function(){},scrollBy:function(t){this.setScrollTop(this.calcScrollTop(t))},setScrollTop:function(t){this.scroll.css({"-webkit-transform":"translate3d(0px, "+-t+"px, 0px)","-ms-transform":"translate3d(0px, "+-t+"px, 0px)","-moz-transform":"translate3d(0px, "+-t+"px, 0px)","-o-transform":"translate3d(0px, "+-t+"px, 0px)",transform:"translate3d(0px, "+-t+"px, 0px)"}),this.fire("scroll")},calcScrollTop:function(t){var o=this;return o.scrollTop+=t,o.scrollTop<0&&(o.scrollTop=0),o.scrollTop>o.scrollContent.getDOMNode().scrollHeight-o.scrollContent.height()&&(o.scrollTop=o.scrollContent.getDOMNode().scrollHeight-o.scrollContent.height()),o.scrollTop},addCmpEvents:function(){var p=this;this.on("scroll",function(t){p.setScrollIndicatorPosition()}),this.scrollContent.on("touchstart",function(t){p.fire("movestart"),p.scrollIndicator.removeClass("scroll-bar-fade-out");function s(t){p.fire("move");var o=t.touches[0].clientY;p.scrollBy(r-o),r=o;var l=t.timeStamp||Date.now();return 30<l-c&&(c=l,a=r),!(h=!0)}var r=t.touches[0].clientY,c=t.timeStamp||Date.now(),a=r,h=!1,d=function(t){var r,n,i,e,o=t.changedTouches[0].clientY,l=t.timeStamp||Date.now();h=!1,e=.004*(i=0<(r=(a-o)/((n=l)-c))?-1:1),function t(){if(!h){var o=Date.now()-n,l=r+o*e;if(0<i*l)p.fire("moveend");else{var s=(r+l)/2*o;p.scrollBy(s),setTimeout(t,10)}}}(),p.scrollContent.detach("touchmove",s),p.scrollContent.detach("touchend",d)};p.scrollContent.on("touchmove",s),p.scrollContent.on("touchend",d)}),this.scrollContent.on("mousedown",function(t){p.fire("movestart"),p.scrollIndicator.removeClass("scroll-bar-fade-out");var l=t.clientY;s.on(i,"mousemove",function(t){p.fire("move");var o=t.clientY;p.scrollBy(2*(l-o)),l=o}),s.on(i,"mouseup",function(t){p.fire("moveend"),p.scrollIndicator.addClass("scroll-bar-fade-out"),s.detach(i,"mousemove")})}),this.scrollContent.on("mousewheel",function(t){var o,l=t.originalEvent;l.wheelDelta?o=l.wheelDelta/120:l.detail&&(o=-l.detail/3),p.scrollBy(0<o?-80:80)}),this.scroll.on("resize",function(t){console.log("resize====")})}}),e},{requires:["node","event","xtemplate","../container/Container"]});